Object TechOilRefinery

  ; *** ART Parameters ***
  SelectPortrait         = SSTechOilRefinery_L
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; DAY ********************************************
    ConditionState     = NONE
      Model            = ZBRefinery
      Animation        = ZBRefinery.ZBRefinery
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; DAMAGED ********************************************
    ConditionState     = DAMAGED
      Model            = ZBRefinery_D
      Animation        = ZBRefinery_D.ZBRefinery_D
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; REALLYDAMAGED ****************************************
    ConditionState     = REALLYDAMAGED
      Model            = ZBRefinery_E
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; RUBBLE *********************************************
    ConditionState     = RUBBLE
      Model            = ZBRefinery_R
    End

    ; NIGHT ********************************************
    ConditionState     = NIGHT
      Model            = ZBRefinery_N
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT DAMAGED ********************************************
    ConditionState     = NIGHT DAMAGED
      Model            = ZBRefinery_DN
      Animation        = ZBRefinery_DN.ZBRefinery_DN
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT REALLYDAMAGED ********************************************
    ConditionState     = NIGHT REALLYDAMAGED
      Model            = ZBRefinery_EN
      Animation        = ZBRefinery_EN.ZBRefinery_EN
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; NIGHT RUBBLE ****************************************
    ConditionState     = NIGHT RUBBLE
      Model            = ZBRefinery_R
    End

    ; SNOW ********************************************
    ConditionState     = SNOW
      Model            = ZBRefinery_S
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; SNOW DAMAGED ********************************************
    ConditionState     = SNOW DAMAGED
      Model            = ZBRefinery_DS
      Animation        = ZBRefinery_DS.ZBRefinery_DS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; SNOW REALLYDAMAGED ********************************************
    ConditionState     = SNOW REALLYDAMAGED
      Model            = ZBRefinery_ES
      Animation        = ZBRefinery_ES.ZBRefinery_ES
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; SNOW RUBBLE ****************************************
    ConditionState     = SNOW RUBBLE
      Model            = ZBRefinery_RS
    End

    ; NIGHT SNOW ********************************************
    ConditionState     = NIGHT SNOW
      Model            = ZBRefinery_NS
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT SNOW DAMAGED ********************************************
    ConditionState     = NIGHT SNOW DAMAGED
      Model            = ZBRefinery_DNS
      Animation        = ZBRefinery_DNS.ZBRefinery_DNS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmolderingSmoke
      ParticleSysBone  = Smoke05 SmolderingSmoke
      ParticleSysBone  = Fire01 FireBurningBarricade01
    End
    ; NIGHT SNOW REALLYDAMAGED ********************************************
    ConditionState     = NIGHT SNOW REALLYDAMAGED
      Model            = ZBRefinery_ENS
      Animation        = ZBRefinery_ENS.ZBRefinery_ENS
      AnimationMode    = LOOP
      ParticleSysBone  = Smoke01 SteamVent
      ParticleSysBone  = Smoke02 SteamVent
      ParticleSysBone  = Smoke03 SmolderingSmoke
      ParticleSysBone  = Smoke04 SmokeFactionLarge
      ParticleSysBone  = Smoke05 SmokeFactionLarge
      ParticleSysBone  = Smoke06 SmokeFactionLarge
      ParticleSysBone  = Fire01 FireBurningBarricade01
      ParticleSysBone  = Fire02 SmolderingFire
      ParticleSysBone  = Fire03 FireFactionLarge
      ParticleSysBone  = Fire04 FireFactionLarge
      ParticleSysBone  = Fire05 FireFactionLarge
    End
    ; NIGHT SNOW RUBBLE ****************************************
    ConditionState     = NIGHT SNOW RUBBLE
      Model            = ZBRefinery_RS
    End

  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBRefinery_F
      Animation     = ZBRefinery_F.ZBRefinery_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED

    ; REALLYDAMAGED *****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBRefinery_FE
      Animation     = ZBRefinery_FE.ZBRefinery_FE
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End

  End
  ; ------------ New Animations fence -----------------
  Draw = W3DModelDraw ModuleTag_LightingAnimations
    AnimationsRequirePower = No

    DefaultConditionState
      Model           = ZBRefinery_A1
      Animation       = ZBRefinery_A1.ZBRefinery_A1
      AnimationMode   = LOOP
    End

    ConditionState    = DAMAGED
      Model           = ZBRefinery_A1D
      Animation       = ZBRefinery_A1D.ZBRefinery_A1D
      AnimationMode   = LOOP
    End

    ConditionState    = REALLYDAMAGED
      Model           = ZBRefinery_A1E
      Animation       = ZBRefinery_A1E.ZBRefinery_A1E
      AnimationMode   = LOOP
    End

    ConditionState    = RUBBLE
      Model           = NONE
    End

  End
  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy


  ; ***DESIGN parameters ***
  DisplayName          = OBJECT:TechOilRefinery
  EditorSorting        = STRUCTURE
  ShroudClearingRange  = 100

  ; *** ENGINEERING Parameters ***
  KindOf               = STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CONSERVATIVE_BUILDING
  Body                 = ActiveBody ModuleTag_03
    MaxHealth          = 2000.0
    InitialHealth      = 2000.0
  End
  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End

  Behavior         = GrantUpgradeCreate ModuleTag_04
    UpgradeToGrant = Upgrade_CostReduction
  End
  Behavior       = CostModifierUpgrade ModuleTag_05
    TriggeredBy  = Upgrade_CostReduction
    EffectKindOf = VEHICLE
    Percentage   = -10%
  End

  Behavior                = FlammableUpdate ModuleTag_07
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End

  Behavior             = FXListDie ModuleTag_08
    DeathFX            = WeaponFX_BombTruckHighExplosiveBombDetonation
  End

  Behavior = TransitionDamageFX ModuleTag_09
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  ; Note that structures with "RUBBLE" states should not use DestroyDie; such buildings are
  ; never truly destroyed, even when reduced to zero health. Also note that garrisonable
  ; buildings automatically stick around because GarrisonContain has it's own DieModule
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

  Behavior = TechBuildingBehavior ModuleTag_10
    ;<NO DATA>
  End

  Behavior = FXListDie ModuleTag_11
    DeathFX = FX_BuildingDie
  End

  Geometry             = BOX
  GeometryMajorRadius  = 37.0
  GeometryMinorRadius  = 40.0
  GeometryHeight       = 60.0
  GeometryIsSmall      = No
  Shadow               = SHADOW_VOLUME

End
